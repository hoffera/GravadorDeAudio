{"version":3,"file":"index.modern.js","sources":["../src/constant.ts","../src/use_media_session.ts","../src/media_session.tsx","../src/index.tsx"],"sourcesContent":["export const HAS_MEDIA_SESSION =\n  window && window.navigator && 'mediaSession' in window.navigator;\n\ninterface Artwork {\n  src: string;\n  sizes: string;\n  type?: string;\n}\n\nexport interface MediaSessionProps {\n  title?: string;\n  artist?: string;\n  album?: string;\n  artwork: Artwork[];\n\n  onPlay?: (...args: any[]) => any;\n  onPause?: (...args: any[]) => any;\n  onSeekBackward?: (...args: any[]) => any;\n  onSeekForward?: (...args: any[]) => any;\n  onPreviousTrack?: (...args: any[]) => any;\n  onNextTrack?: (...args: any[]) => any;\n}\n","import { useEffect } from 'react';\n\nimport { MediaSessionProps } from './constant';\n\nconst useMediaSession = (props: MediaSessionProps) => {\n  const {\n    title = '',\n    artist = '',\n    album = '',\n    artwork = [],\n\n    onPlay,\n    onPause,\n    onSeekBackward,\n    onSeekForward,\n    onPreviousTrack,\n    onNextTrack,\n  } = props;\n\n  // @ts-ignore\n  const { mediaSession } = navigator;\n\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.metadata = new MediaMetadata({\n      title,\n      artist,\n      album,\n      artwork,\n    });\n    return () => {\n      mediaSession.metadata = null;\n    };\n  }, [title, artist, album, artwork]);\n\n  useEffect(() => {\n    mediaSession.setActionHandler('play', onPlay);\n    return () => {\n      mediaSession.setActionHandler('play', null);\n    };\n  }, [onPlay]);\n  useEffect(() => {\n    mediaSession.setActionHandler('pause', onPause);\n    return () => {\n      mediaSession.setActionHandler('pause', null);\n    };\n  }, [onPause]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekbackward', onSeekBackward);\n    return () => {\n      mediaSession.setActionHandler('seekbackward', null);\n    };\n  }, [onSeekBackward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekforward', onSeekForward);\n    return () => {\n      mediaSession.setActionHandler('seekforward', null);\n    };\n  }, [onSeekForward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('previoustrack', onPreviousTrack);\n    return () => {\n      mediaSession.setActionHandler('previoustrack', null);\n    };\n  }, [onPreviousTrack]);\n  useEffect(() => {\n    mediaSession.setActionHandler('nexttrack', onNextTrack);\n    return () => {\n      mediaSession.setActionHandler('nexttrack', null);\n    };\n  }, [onNextTrack]);\n};\n\nexport default useMediaSession;\n","import React, { Fragment } from 'react';\n\nimport { MediaSessionProps } from './constant';\nimport useMediaSession from './use_media_session';\n\nconst MediaSession = (props: React.PropsWithChildren<MediaSessionProps>) => {\n  const { children, ...rest } = props;\n  useMediaSession(rest);\n  return <Fragment>{children || null}</Fragment>;\n};\n\nexport default MediaSession;\n","import React, { Fragment } from 'react';\n\nimport { HAS_MEDIA_SESSION, MediaSessionProps } from './constant';\nimport useMediaSession from './use_media_session';\n\nimport MediaSession from './media_session';\n\nconst MediaSessionWrapper = (props: React.PropsWithChildren<MediaSessionProps>) => {\n  if (!HAS_MEDIA_SESSION) {\n    return <Fragment>{props.children || null}</Fragment>;\n  }\n  return <MediaSession {...props} />;\n};\n\nexport { HAS_MEDIA_SESSION, useMediaSession };\nexport default MediaSessionWrapper;\n"],"names":["HAS_MEDIA_SESSION","window","navigator","useMediaSession","props","title","artist","album","artwork","onPlay","onPause","onSeekBackward","onSeekForward","onPreviousTrack","onNextTrack","mediaSession","useEffect","metadata","MediaMetadata","setActionHandler","MediaSession","children","rest","React","Fragment","MediaSessionWrapper"],"mappings":"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"}